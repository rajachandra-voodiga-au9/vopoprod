(this.webpackJsonpvopo=this.webpackJsonpvopo||[]).push([[0],{39:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t);var s=n(0),r=n(1),a=n.n(r),c=n(21),i=n.n(c),o=(n(39),n(5)),d=n(6),l=n(8),u=n(7),h=n(2),j=n(9),p=n(4),m=n(10),b="UPDATE_POSTS",f="LOGIN_START",O="LOGIN_SUCCESS",v="LOGIN_FAILED",g="AUTHENTICATE_USER",x="LOG_OUT",N="SIGNUP_START",C="SIGNUP_SUCCESS",w="SIGNUP_FAILED",y="CLEAR_AUTH_STATE",S="EDIT_USER_SUCCESSFUL",k="EDIT_USER_FAILED",_="USER_PROFILE_SUCCESS",I="USER_PROFILE_FAILURE",E="FETCH_USER_PROFILE",P="FETCH_FRIENDS_SUCCESS",T="ADD_FRIEND",L="REMOVE_FRIEND",A="ADD_POST",U="ADD_COMMENT",F="UPDATE_POST_LIKE",R="FETCH_SEARCH_RESULTS_SUCCESS",D="http://codeial.com:8000/api/v2",M=function(){return"".concat(D,"/users/login")},B=function(){return"".concat(D,"/users/signup")},z=function(){return"".concat(D,"/users/edit")},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25;return"".concat(D,"/posts?page=").concat(e,"&limit=").concat(t)},H=function(e){return"".concat(D,"/users/").concat(e)},q=function(){return"".concat(D,"/friendship/fetch_user_friends")},K=function(e){return"".concat(D,"/friendship/create_friendship?user_id=").concat(e)},W=function(e){return"".concat(D,"/friendship/remove_friendship?user_id=").concat(e)},J=function(){return"".concat(D,"/posts/create")},V=function(){return"".concat(D,"/comments/")},Q=function(e,t){return"".concat(D,"/likes/toggle?likeable_id=").concat(e,"&likeable_type=").concat(t)},X=function(e){return"".concat(D,"/users/search?text=").concat(e)};function Y(e){var t=[];for(var n in e){var s=encodeURIComponent(n),r=encodeURIComponent(e[n]);t.push(s+"="+r)}return t.join("&")}function Z(){return localStorage.getItem("token")}function $(){return function(e){var t=G();fetch(t).then((function(e){return e.json()})).then((function(t){var n;console.log(t),e((n=t.data.posts,{type:b,posts:n}))}))}}function ee(e){return function(t){var n=J();fetch(n,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer ".concat(Z())},body:Y({content:e})}).then((function(e){return e.json()})).then((function(e){var n;console.log("dATA",e),e.success&&t((n=e.data.post,{type:A,post:n}))}))}}function te(e,t){return function(n){var s=V();fetch(s,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer ".concat(Z())},body:Y({content:e,post_id:t})}).then((function(e){return e.json()})).then((function(e){e.success&&n(function(e,t){return{type:U,comment:e,postId:t}}(e.data.comment,t))}))}}function ne(e,t,n){return function(s){var r=Q(e,t);fetch(r,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer ".concat(Z())}}).then((function(e){return e.json()})).then((function(t){console.log("LIKE DATA",t),t.success&&s(function(e,t){return{type:F,postId:e,userId:t}}(e,n))}))}}var se=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){var e=this.props.posts;return Object(s.jsxs)("div",{className:"posts-list",children:[Object(s.jsx)(Te,{}),e.map((function(e){return Object(s.jsx)(Ae,{post:e},e._id)}))]})}}]),n}(r.Component);function re(e,t){return function(n){n({type:f});var s=M();fetch(s,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Y({email:e,password:t})}).then((function(e){return e.json()})).then((function(e){if(console.log("data",e),e.success)return localStorage.setItem("token",e.data.token),void n((t=e.data.user,{type:O,user:t}));var t,s;n((s=e.message,{type:v,error:s}))}))}}function ae(){return{type:x}}function ce(e,t,n,s){return function(r){var a=B();fetch(a,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Y({email:e,password:t,confirm_password:n,name:s})}).then((function(e){return e.json()})).then((function(e){if(e.success)return localStorage.setItem("token",e.data.token),void r((t=e.data.user,{type:C,user:t}));var t,n;r((n=e.message,{type:w,error:n}))}))}}function ie(){return{type:y}}function oe(e,t,n,s){return function(r){var a=z();fetch(a,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer ".concat(Z())},body:Y({name:e,password:t,confirm_password:n,id:s})}).then((function(e){return e.json()})).then((function(e){if(console.log("EDIT PROFIle data",e),e.success)return r((t=e.data.user,{type:S,user:t})),void(e.data.token&&localStorage.setItem("token",e.data.token));var t,n;r((n=e.message,{type:S,error:n}))}))}}function de(e){return function(t){var n=X(e);fetch(n,{headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer ".concat(Z())}}).then((function(e){return e.json()})).then((function(e){console.log("SEARCH data",e),e.success?t(le(e.data.users)):t(le([]))}))}}function le(e){return{type:R,users:e}}var ue=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).logOut=function(){localStorage.removeItem("token"),e.props.dispatch(ae())},e.handleSearch=function(t){var n=t.target.value;e.props.dispatch(de(n))},e}return Object(d.a)(n,[{key:"render",value:function(){var e=this.props,t=e.auth,n=e.results;return Object(s.jsxs)("nav",{className:"nav",children:[Object(s.jsx)("div",{className:"left-div",children:Object(s.jsx)(m.b,{to:"/",className:"brand-link",children:Object(s.jsx)("h1",{className:"brand-name",children:"VOPO"})})}),Object(s.jsxs)("div",{className:"search-container",children:[Object(s.jsx)("img",{className:"search-icon",src:"https://image.flaticon.com/icons/svg/483/483356.svg",alt:"search-icon"}),Object(s.jsx)("input",{placeholder:"Search",onChange:this.handleSearch}),n.length>0&&Object(s.jsx)("div",{className:"search-results",children:Object(s.jsx)("ul",{children:n.map((function(e){return Object(s.jsx)("li",{className:"search-results-row",children:Object(s.jsxs)(m.b,{to:"/user/".concat(e._id),children:[Object(s.jsx)("img",{src:"https://image.flaticon.com/icons/svg/2154/2154651.svg",alt:"user-dp"}),Object(s.jsx)("span",{children:e.name})]})},e._id)}))})})]}),Object(s.jsxs)("div",{className:"right-nav",children:[t.isLoggedin&&Object(s.jsxs)("div",{className:"user",children:[Object(s.jsx)(m.b,{to:"/settings",children:Object(s.jsx)("img",{src:"https://image.flaticon.com/icons/svg/2154/2154651.svg",alt:"user-dp",id:"user-dp"})}),Object(s.jsx)("span",{children:t.user.name})]}),Object(s.jsx)("div",{className:"nav-links",children:Object(s.jsxs)("ul",{children:[!t.isLoggedin&&Object(s.jsx)("li",{children:Object(s.jsx)(m.b,{to:"/login",children:"Log in"})}),t.isLoggedin&&Object(s.jsx)("li",{onClick:this.logOut,children:"Log out"}),!t.isLoggedin&&Object(s.jsx)("li",{children:Object(s.jsx)(m.b,{to:"/signup",children:"Register"})})]})})]})]})}}]),n}(a.a.Component);var he=Object(j.b)((function(e){return{auth:e.auth,results:e.search.results}}))(ue),je=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){var e=this.props,t=e.posts,n=e.friends,r=e.isLoggedin;return Object(s.jsxs)("div",{className:"home",children:[Object(s.jsx)(se,{posts:t}),r&&Object(s.jsx)(Ie,{friends:n})]})}}]),n}(r.Component);var pe=function(e){return Object(s.jsx)("div",{children:Object(s.jsx)("h1",{children:"404: Nothing found here!"})})},me=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(o.a)(this,n),(s=t.call(this,e)).handleEmailChange=function(e){s.setState({email:e.target.value})},s.handlePasswordChange=function(e){s.setState({password:e.target.value})},s.handleFormSubmit=function(e){e.preventDefault(),console.log("this.state",s.state);var t=s.state,n=t.email,r=t.password;n&&r&&s.props.dispatch(re(n,r))},s.state={email:"",password:""},s}return Object(d.a)(n,[{key:"componentWillUnmount",value:function(){this.props.dispatch(ie())}},{key:"render",value:function(){var e=this.props.auth,t=e.error,n=e.inProgress,r=e.isLoggedin,a=(this.props.location.state||{from:{pathname:"/"}}).from;return r?Object(s.jsx)(p.a,{to:a}):Object(s.jsxs)("form",{className:"login-form",children:[Object(s.jsx)("span",{className:"login-signup-header",children:"Log In"}),t&&Object(s.jsx)("div",{className:"alert error-dailog",children:t}),Object(s.jsx)("div",{className:"field",children:Object(s.jsx)("input",{type:"email",placeholder:"Email",required:!0,onChange:this.handleEmailChange,value:this.state.email})}),Object(s.jsx)("div",{className:"field",children:Object(s.jsx)("input",{type:"password",placeholder:"Password",required:!0,onChange:this.handlePasswordChange,value:this.state.password})}),Object(s.jsx)("div",{className:"field",children:n?Object(s.jsx)("button",{onClick:this.handleFormSubmit,disabled:n,children:"Logging in..."}):Object(s.jsx)("button",{onClick:this.handleFormSubmit,disabled:n,children:"Log In"})})]})}}]),n}(r.Component);var be=Object(j.b)((function(e){return{auth:e.auth}}))(me),fe=n(17),Oe=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(o.a)(this,n),(s=t.call(this,e)).handleInputChange=function(e,t){s.setState(Object(fe.a)({},e,t))},s.onFormSubmit=function(e){e.preventDefault();var t=s.state,n=t.email,r=t.password,a=t.confirmPassword,c=t.name;n&&r&&a&&c&&(s.props.dispatch({type:N}),s.props.dispatch(ce(n,r,a,c)))},s.state={email:"",password:"",name:"",confirmPassword:""},s}return Object(d.a)(n,[{key:"componentWillUnmount",value:function(){this.props.dispatch(ie())}},{key:"render",value:function(){var e=this,t=this.props.auth,n=t.inProgress,r=t.error;return t.isLoggedin?Object(s.jsx)(p.a,{to:"/"}):Object(s.jsxs)("form",{className:"login-form",children:[Object(s.jsx)("span",{className:"login-signup-header",children:" Signup"}),r&&Object(s.jsx)("div",{className:"alert error-dailog",children:r}),Object(s.jsx)("div",{className:"field",children:Object(s.jsx)("input",{placeholder:"Name",type:"text",required:!0,onChange:function(t){return e.handleInputChange("name",t.target.value)}})}),Object(s.jsx)("div",{className:"field",children:Object(s.jsx)("input",{placeholder:"Email",type:"email",required:!0,onChange:function(t){return e.handleInputChange("email",t.target.value)}})}),Object(s.jsx)("div",{className:"field",children:Object(s.jsx)("input",{placeholder:"Confirm password",type:"password",required:!0,onChange:function(t){return e.handleInputChange("confirmPassword",t.target.value)}})}),Object(s.jsx)("div",{className:"field",children:Object(s.jsx)("input",{placeholder:"Password",type:"password",required:!0,onChange:function(t){return e.handleInputChange("password",t.target.value)}})}),Object(s.jsx)("div",{className:"field",children:Object(s.jsx)("button",{onClick:this.onFormSubmit,disabled:n,children:"Signup"})})]})}}]),n}(r.Component),ve=Object(j.b)((function(e){return{auth:e.auth}}))(Oe),ge=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(o.a)(this,n),(s=t.call(this,e)).handleChange=function(e,t){s.setState(Object(fe.a)({},e,t))},s.handleSave=function(){var e=s.state,t=e.password,n=e.confirmPassword,r=e.name,a=s.props.auth.user;s.props.dispatch(oe(r,t,n,a._id))},s.state={name:e.auth.user.name,password:"",confirmPassword:"",editMode:!1},s}return Object(d.a)(n,[{key:"componentWillUnmount",value:function(){this.props.dispatch(ie())}},{key:"render",value:function(){var e=this,t=this.props.auth,n=t.user,r=t.error,a=this.state.editMode;return Object(s.jsxs)("div",{className:"settings",children:[Object(s.jsx)("div",{className:"img-container",children:Object(s.jsx)("img",{src:"https://image.flaticon.com/icons/svg/2154/2154651.svg",alt:"user-dp"})}),r&&Object(s.jsx)("div",{className:"alert error-dailog",children:r}),!1===r&&Object(s.jsx)("div",{className:"alert success-dailog",children:"Successfully updated profile!"}),Object(s.jsxs)("div",{className:"field",children:[Object(s.jsx)("div",{className:"field-label",children:"Email"}),Object(s.jsx)("div",{className:"field-value",children:n.email})]}),Object(s.jsxs)("div",{className:"field",children:[Object(s.jsx)("div",{className:"field-label",children:"Name"}),a?Object(s.jsx)("input",{type:"text",onChange:function(t){return e.handleChange("name",t.target.value)},value:this.state.name}):Object(s.jsx)("div",{className:"field-value",children:n.name})]}),a&&Object(s.jsxs)("div",{className:"field",children:[Object(s.jsx)("div",{className:"field-label",children:"New password"}),Object(s.jsx)("input",{type:"password",onChange:function(t){return e.handleChange("password",t.target.value)},value:this.state.password})]}),a&&Object(s.jsxs)("div",{className:"field",children:[Object(s.jsx)("div",{className:"field-label",children:"Confirm password"}),Object(s.jsx)("input",{type:"password",onChange:function(t){return e.handleChange("confirmPassword",t.target.value)},value:this.state.confirmPassword})]}),Object(s.jsxs)("div",{className:"btn-grp",children:[a?Object(s.jsx)("button",{className:"button save-btn",onClick:this.handleSave,children:"Save"}):Object(s.jsx)("button",{className:"button edit-btn",onClick:function(){return e.handleChange("editMode",!0)},children:"Edit profile"}),a&&Object(s.jsx)("div",{className:"go-back",onClick:function(){return e.handleChange("editMode",!1)},children:"Go back"})]})]})}}]),n}(r.Component);var xe=Object(j.b)((function(e){return{auth:e.auth}}))(ge),Ne=n(20),Ce=n.n(Ne),we=n(29);function ye(e){return function(t){t({type:E});var n=H(e);fetch(n,{headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer ".concat(Z())}}).then((function(e){return e.json()})).then((function(e){var n;t((n=e.data.user,{type:_,user:n}))}))}}function Se(e){return function(t){var n=q(e);fetch(n,{headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer ".concat(Z())}}).then((function(e){return e.json()})).then((function(e){var n;console.log("data",e),t((n=e.data.friends,{type:P,friends:n}))}))}}var ke=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(o.a)(this,n),(s=t.call(this,e)).checkIfUserIsAFriend=function(){console.log("this.props",s.props);var e=s.props,t=e.match,n=e.friends,r=t.params.userId;return-1!==n.map((function(e){return e.to_user._id})).indexOf(r)},s.handleAddFriendClick=Object(we.a)(Ce.a.mark((function e(){var t,n,r,a,c;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.props.match.params.userId,n=K(t),r={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer ".concat(Z())}},e.next=5,fetch(n,r);case 5:return a=e.sent,e.next=8,a.json();case 8:(c=e.sent).success?(s.setState({success:!0,successMessage:"Added friend successfully!"}),s.props.dispatch((i=c.data.friendship,{type:T,friend:i}))):s.setState({success:null,error:c.message});case 10:case"end":return e.stop()}var i}),e)}))),s.handleRemoveFriendClick=Object(we.a)(Ce.a.mark((function e(){var t,n,r,a,c;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.props.match,n=W(t.params.userId),r={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer ".concat(Z())}},e.next=5,fetch(n,r);case 5:return a=e.sent,e.next=8,a.json();case 8:c=e.sent,console.log("await data",c),c.success?(s.setState({success:!0,successMessage:"Removed friends successfully!"}),s.props.dispatch((i=t.params.userId,{type:L,userId:i}))):s.setState({success:null,error:c.message});case 11:case"end":return e.stop()}var i}),e)}))),s.state={success:null,error:null,successMessage:null},s}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.match;e.params.userId&&this.props.dispatch(ye(e.params.userId))}},{key:"componentDidUpdate",value:function(e){var t=e.match.params,n=this.props.match.params;t&&n&&t.userId!==n.userId&&this.props.dispatch(ye(n.userId))}},{key:"render",value:function(){var e=this.props,t=e.match.params,n=e.profile;console.log("this.props",t);var r=n.user;if(n.inProgress)return Object(s.jsx)("h1",{children:"Loading!"});var a=this.checkIfUserIsAFriend(),c=this.state,i=c.success,o=c.error,d=c.successMessage;return Object(s.jsxs)("div",{className:"settings",children:[Object(s.jsx)("div",{className:"img-container",children:Object(s.jsx)("img",{src:"https://image.flaticon.com/icons/svg/2154/2154651.svg",alt:"user-dp"})}),Object(s.jsxs)("div",{className:"field",children:[Object(s.jsx)("div",{className:"field-label",children:"Name"}),Object(s.jsx)("div",{className:"field-value",children:r.name})]}),Object(s.jsxs)("div",{className:"field",children:[Object(s.jsx)("div",{className:"field-label",children:"Email"}),Object(s.jsx)("div",{className:"field-value",children:r.email})]}),Object(s.jsxs)("div",{className:"btn-grp",children:[a?Object(s.jsx)("button",{className:"button save-btn",onClick:this.handleRemoveFriendClick,children:"Remove Friend"}):Object(s.jsx)("button",{className:"button save-btn",onClick:this.handleAddFriendClick,children:"Add Friend"}),i&&Object(s.jsx)("div",{className:"alert success-dailog",children:d}),o&&Object(s.jsx)("div",{className:"alert error-dailog",children:o})]})]})}}]),n}(r.Component);var _e=Object(j.b)((function(e){return{profile:e.profile,friends:e.friends}}))(ke),Ie=function(e){return Object(s.jsxs)("div",{className:"friends-list",children:[Object(s.jsx)("div",{className:"header",children:"Friends"}),e.friends&&0===e.friends.length&&Object(s.jsx)("div",{className:"no-friends",children:"No friends found!"}),e.friends&&e.friends.map((function(e){return Object(s.jsx)(Ee,{friend:e.to_user},e._id)}))]})};var Ee=function(e){return Object(s.jsx)("div",{children:Object(s.jsxs)(m.b,{className:"friends-item",to:"user/".concat(e.friend._id),children:[Object(s.jsx)("div",{className:"friends-img",children:Object(s.jsx)("img",{src:"https://image.flaticon.com/icons/svg/2154/2154651.svg",alt:"user-pic"})}),Object(s.jsx)("div",{className:"friends-name",children:e.friend.email})]})})},Pe=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(o.a)(this,n),(s=t.call(this,e)).handleOnClick=function(){s.props.dispatch(ee(s.state.content))},s.handleChange=function(e){s.setState({content:e.target.value})},s.state={content:""},s}return Object(d.a)(n,[{key:"render",value:function(){return Object(s.jsxs)("div",{className:"create-post",children:[Object(s.jsx)("textarea",{className:"add-post",value:this.state.content,onChange:this.handleChange}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{id:"add-post-btn",onClick:this.handleOnClick,children:"Add Post"})})]})}}]),n}(r.Component),Te=Object(j.b)()(Pe),Le=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(o.a)(this,n),(s=t.call(this,e)).handleAddComment=function(e){var t=s.state.comment,n=s.props.post;"Enter"===e.key&&(s.props.dispatch(te(t,n._id)),s.setState({comment:""}))},s.handleOnCommentChange=function(e){s.setState({comment:e.target.value})},s.handlePostLike=function(){var e=s.props,t=e.post,n=e.user;s.props.dispatch(ne(t._id,"Post",n._id))},s.state={comment:""},s}return Object(d.a)(n,[{key:"render",value:function(){var e=this.props,t=e.post,n=e.user,r=this.state.comment,a=t.likes.includes(n._id);return Object(s.jsx)("div",{className:"post-wrapper",children:Object(s.jsxs)("div",{className:"post-header",children:[Object(s.jsxs)("div",{className:"post-avatar",children:[Object(s.jsx)(m.b,{to:"/user/".concat(t.user._id),children:Object(s.jsx)("img",{src:"https://image.flaticon.com/icons/svg/2154/2154651.svg",alt:"user-pic"})}),Object(s.jsxs)("div",{children:[Object(s.jsx)("span",{className:"post-author",children:t.user.name}),Object(s.jsx)("span",{className:"post-time",children:"a minute ago"})]})]}),Object(s.jsx)("div",{className:"post-content",children:t.content}),Object(s.jsxs)("div",{className:"post-actions",children:[Object(s.jsxs)("button",{className:"post-like no-btn",onClick:this.handlePostLike,children:[a?Object(s.jsx)("img",{src:"https://image.flaticon.com/icons/svg/1076/1076984.svg",alt:"like post"}):Object(s.jsx)("img",{src:"https://image.flaticon.com/icons/svg/1077/1077035.svg",alt:"likes-icon"}),Object(s.jsx)("span",{children:t.likes.length})]}),Object(s.jsxs)("div",{className:"post-comments-icon",children:[Object(s.jsx)("img",{src:"https://image.flaticon.com/icons/svg/1380/1380338.svg",alt:"comments-icon"}),Object(s.jsx)("span",{children:t.comments.length})]})]}),Object(s.jsx)("div",{className:"post-comment-box",children:Object(s.jsx)("input",{placeholder:"Start typing a comment",onChange:this.handleOnCommentChange,onKeyPress:this.handleAddComment,value:r})}),Object(s.jsx)("div",{className:"post-comments-list",children:t.comments.map((function(e){return Object(s.jsx)(Ue,{comment:e,postId:t._id},e._id)}))})]})},t._id)}}]),n}(r.Component);var Ae=Object(j.b)((function(e){return{user:e.auth.user}}))(Le);var Ue=function(e){var t=e.comment;return Object(s.jsxs)("div",{className:"post-comment-item",children:[Object(s.jsxs)("div",{className:"post-comment-header",children:[Object(s.jsx)("span",{className:"post-comment-author",children:t.user.name}),Object(s.jsx)("span",{className:"post-comment-time",children:"a minute ago"}),Object(s.jsxs)("span",{className:"post-comment-likes",children:[t.likes.length," likes"]})]}),Object(s.jsx)("div",{className:"post-comment-content",children:t.content})]})},Fe=n(31),Re=function(e){var t=e.isLoggedin,n=e.path,r=e.component;return Object(s.jsx)(p.b,{path:n,render:function(e){return console.log("props",e),console.log("isLoggedin",t),t?Object(s.jsx)(r,Object(h.a)({},e)):Object(s.jsx)(p.a,{to:{pathname:"/login",state:{from:e.location}}})}})},De=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.props.dispatch($());var e=Z();if(e){var t=Object(Fe.a)(e);console.log("user",t),this.props.dispatch(function(e){return{type:g,user:e}}({email:t.email,_id:t._id,name:t.name})),this.props.dispatch(Se())}}},{key:"render",value:function(){var e=this.props,t=e.posts,n=e.auth,r=e.friends;return Object(s.jsx)(m.a,{children:Object(s.jsxs)("div",{children:[Object(s.jsx)(he,{}),Object(s.jsxs)(p.d,{children:[Object(s.jsx)(p.b,{exact:!0,path:"/",render:function(e){return Object(s.jsx)(je,Object(h.a)(Object(h.a)({},e),{},{posts:t,friends:r,isLoggedin:n.isLoggedin}))}}),Object(s.jsx)(p.b,{path:"/login",component:be}),Object(s.jsx)(p.b,{path:"/signup",component:ve}),Object(s.jsx)(Re,{path:"/settings",component:xe,isLoggedin:n.isLoggedin}),Object(s.jsx)(Re,{path:"/user/:userId",component:_e,isLoggedin:n.isLoggedin}),Object(s.jsx)(p.b,{component:pe})]})]})})}}]),n}(a.a.Component);var Me=Object(j.b)((function(e){return{posts:e.posts,auth:e.auth,friends:e.friends}}))(De),Be=n(15),ze=n(32),Ge=n(33),He=n.n(Ge),qe=n(18);var Ke={user:{},error:null,isLoggedin:!1,inProgress:!1};var We={user:{},error:null,success:null,inProgress:!1};var Je=[];var Ve={results:[]};var Qe=Object(Be.c)({posts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return t.posts;case A:return[t.post].concat(Object(qe.a)(e));case U:var n=e.map((function(e){return e._id===t.postId?Object(h.a)(Object(h.a)({},e),{},{comments:[t.comment].concat(Object(qe.a)(e.comments))}):e}));return n;case F:var s=e.map((function(e){return e._id===t.postId?Object(h.a)(Object(h.a)({},e),{},{likes:[].concat(Object(qe.a)(e.likes),[t.userId])}):e}));return s;default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return Object(h.a)(Object(h.a)({},e),{},{error:null});case f:case N:return Object(h.a)(Object(h.a)({},e),{},{inProgress:!0});case O:case C:return Object(h.a)(Object(h.a)({},e),{},{user:t.user,isLoggedin:!0,inProgress:!1,error:null});case v:case w:return Object(h.a)(Object(h.a)({},e),{},{inProgress:!1,error:t.error});case g:return Object(h.a)(Object(h.a)({},e),{},{user:t.user,isLoggedin:!0});case x:return Object(h.a)(Object(h.a)({},e),{},{user:{},isLoggedin:!1});case S:return Object(h.a)(Object(h.a)({},e),{},{user:t.user,error:!1});case k:return Object(h.a)(Object(h.a)({},e),{},{error:t.error});default:return e}},profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return Object(h.a)(Object(h.a)({},e),{},{success:!0,user:t.user,inProgress:!1});case I:return Object(h.a)(Object(h.a)({},e),{},{error:t.error,inProgress:!1});case E:return Object(h.a)(Object(h.a)({},e),{},{inProgress:!0});default:return e}},friends:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P:return Object(qe.a)(t.friends);case T:return e.concat(t.friend);case L:var n=e.filter((function(e){return e.to_user._id!==t.userId}));return n;default:return e}},search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R:return Object(h.a)(Object(h.a)({},e),{},{results:t.users});default:return e}}});var Xe=Object(Be.d)(Qe,Object(Be.a)(ze.a,He.a));console.log("store: ",Xe.getState()),i.a.render(Object(s.jsx)(j.a,{store:Xe,children:Object(s.jsx)(Me,{})}),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.dffc3cf3.chunk.js.map